
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>SICP Section 1.2 - Chao's Random Thoughts</title>
  <meta name="author" content="Chao Chu">

  
  <meta name="description" content="Recursive Process V.S. Iterative Process Recursive process
The substitution model of a recursive process reveals a shape of expansion
followed by &hellip;">
  <meta name="keywords" content="SICP">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://chuchao333.github.io/blog/2013/06/14/sicp-section-1-2/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Chao's Random Thoughts" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Chao's Random Thoughts</a></h1>
  
    <h2>Keep looking, don't settle</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:chuchao333.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/notes">Notes</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">SICP Section 1.2</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-14T00:54:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><div class="section" id="recursive-process-v-s-iterative-process">
<h2>Recursive Process V.S. Iterative Process</h2>
<ul>
<li><p class="first">Recursive process</p>
<p>The substitution model of a recursive process reveals a shape of expansion
followed by constraction. The expansion occurs as the process builds up a
chain of defered operations. The contraction occurs as the operations are
actually performed.</p>
</li>
<li><p class="first">Iterative process</p>
<p>An iterative process is one whose state can be summarized by a fixed number
of state variables, together with a fixed rule that describes how the state
variables should be updated as the process moves from state to state and an
(optional) end test that specifies the conditions under which the process
should terminate.</p>
</li>
</ul>
<p>In the iterative case, the program variables provide a complete description
of the state of the process at any point, while in the recursive case, there
is some additional &quot;hidden&quot; information, maintained by the interpreter and not
contained in the program variables.</p>
<blockquote class="highlights">
In contrasting iteration and recursion, we must be careful not to confuse
the notion of a recursive process with the notion of a recursive procedure.
When we describe a procedure as recursive, we are referring to the
syntactic fact that the procedure definition refers (either directly or
indirectly) to the procedure itself. But when we describe a process as
following a pattern that is, say, linearly recursive, we are speaking about
how the process evolves, not about the syntax of how a procedure is written.
It may seem disturbing that we refer to a recursive procedure as generating
an iterative process.</blockquote>
</div>
<div class="section" id="lame-s-theorem">
<h2>Lame's Theorem</h2>
<blockquote class="highlights">
If Euclid's Algorithm requires k steps to compute the GCD of some pair,
then the smaller number in the pair must be greater than or equal to the
kth Fibonacci number.</blockquote>
</div>
<div class="section" id="fermat-s-little-theorem">
<h2>Fermat's Little Theorem</h2>
<blockquote class="highlights">
If n is a prime number and a is any positive integer less than n, then a
raised to the nth power is congruent to a modulo n.</blockquote>
</div>
<div class="section" id="exercises">
<h2>Exercises</h2>
<p><strong>1.9</strong>
Answer: The first process is recursive and the second one is iterative.</p>
<p><strong>1.10</strong>
Answer: from the definition of (A x y), we have:</p>
<p>(A 1 10) = A(0 (A 1 9)) = 2 * (A 1 9) = ... = 2^9 * (A 1 1) = 2^10</p>
<p>(A 2 4) = 65536</p>
<p>(A 3 3) = 65536</p>
<p>(f n) computes <em>2n</em></p>
<p>(g n) computes <em>2^n</em></p>
<p>(h n) computes <em>2^2^2... (n times)</em></p>
<p><strong>1.11</strong>
Answer: This is similar with the example of computing Fibonacci number.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">f-recursive</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">f-recursive</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">                 <span class="p">(</span><span class="nb">* </span><span class="p">(</span><span class="nf">f-recursive</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">2</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span>
</span><span class="line">                 <span class="p">(</span><span class="nb">* </span><span class="p">(</span><span class="nf">f-recursive</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">3</span><span class="p">))</span> <span class="mi">3</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">f-iterative</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">f-iter</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="nv">n</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">f-iter</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">count</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">count</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">= </span><span class="nv">count</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">b</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">= </span><span class="nv">count</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">f-iter</span> <span class="nv">b</span> <span class="nv">c</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">c</span> <span class="p">(</span><span class="nb">* </span><span class="nv">b</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="mi">3</span><span class="p">))</span> <span class="p">(</span><span class="nb">- </span><span class="nv">count</span> <span class="mi">1</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.12</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="c1">; both row and col indexes start at 0</span>
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">pascal-triangle</span> <span class="nv">row</span> <span class="nv">col</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">col</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">= </span><span class="nv">row</span> <span class="nv">col</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">pascal-triangle</span> <span class="p">(</span><span class="nb">- </span><span class="nv">row</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">col</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">                 <span class="p">(</span><span class="nf">pascal-triangle</span> <span class="p">(</span><span class="nb">- </span><span class="nv">row</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">col</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.15</strong>
Answer:</p>
<p>a. from the the procedure definition, suppose <em>p</em> will be called t times,
we have:</p>
<p>a / (3^t) &lt;= 0.1, which leads to:</p>
<p>log(10a) &lt;= t, so t = ceiling (log(10a)) = 5, (the base of the log is 3)</p>
<p>b. both the space and number of steps depend on how many times <em>p</em> is called,
so it's O(t) = O(log(a)).</p>
<p><strong>1.16</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fast-expt</span> <span class="nv">b</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">fast-expt-iter</span> <span class="nv">b</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fast-expt-iter</span> <span class="nv">b</span> <span class="nv">n</span> <span class="nv">product</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">product</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">n</span><span class="p">)</span> <span class="p">(</span><span class="nf">fast-expt-iter</span> <span class="p">(</span><span class="nf">square</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">product</span><span class="p">))</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">fast-expt-iter</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">b</span> <span class="nv">product</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nb">even? </span><span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nb">remainder </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">0</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.17</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">mul</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">b</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">mul</span> <span class="p">(</span><span class="nf">double</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">halve</span> <span class="nv">b</span><span class="p">)))</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nb">+ </span><span class="nv">a</span> <span class="p">(</span><span class="nf">mul</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">- </span><span class="nv">b</span> <span class="mi">1</span><span class="p">))))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">double</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="mi">2</span><span class="p">))</span>
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">halve</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">x</span> <span class="mi">2</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.18</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">mul</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">mul-iter</span> <span class="nv">a</span> <span class="nv">b</span> <span class="mi">0</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">mul-iter</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">sum</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">b</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">sum</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">mul-iter</span> <span class="p">(</span><span class="nf">double</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">halve</span> <span class="nv">b</span><span class="p">)</span> <span class="nv">sum</span><span class="p">))</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">mul-iter</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">- </span><span class="nv">b</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">a</span> <span class="nv">sum</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">double</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="mi">2</span><span class="p">))</span>
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">halve</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">x</span> <span class="mi">2</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.19</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="c1">; use the matrix multiplication to represent the transformation</span>
</span><span class="line">
</span><span class="line"><span class="c1">;                       0 1</span>
</span><span class="line"><span class="c1">; (fib(n-1), fib(n)) *        = (fib(n), fib(n-1) + fib(n)) = (fib(n), fib(n+1))</span>
</span><span class="line"><span class="c1">;                       1 1</span>
</span><span class="line">
</span><span class="line"><span class="c1">; a &lt;- a + b</span>
</span><span class="line"><span class="c1">; b &lt;- a</span>
</span><span class="line">
</span><span class="line"><span class="c1">; the state transformation above is just a special case of the below one when</span>
</span><span class="line"><span class="c1">; p = 0 and q = 1</span>
</span><span class="line">
</span><span class="line"><span class="c1">; a &lt;- bq + aq + ap</span>
</span><span class="line"><span class="c1">; b &lt;- bp + aq</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fib</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">fib-iter</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="nv">n</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fib-iter</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span> <span class="nv">q</span> <span class="nv">count</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">count</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">b</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">count</span><span class="p">)</span>
</span><span class="line">         <span class="p">(</span><span class="nf">fib-iter</span>
</span><span class="line">           <span class="nv">a</span>
</span><span class="line">           <span class="nv">b</span>
</span><span class="line">           <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">square</span> <span class="nv">p</span><span class="p">)</span> <span class="p">(</span><span class="nf">square</span> <span class="nv">q</span><span class="p">))</span>
</span><span class="line">           <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">square</span> <span class="nv">q</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">p</span> <span class="nv">q</span> <span class="mi">2</span><span class="p">))</span>
</span><span class="line">           <span class="p">(</span><span class="nb">/ </span><span class="nv">count</span> <span class="mi">2</span><span class="p">)))</span>
</span><span class="line">  <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">fib-iter</span>
</span><span class="line">          <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="nv">b</span> <span class="nv">q</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">q</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">p</span><span class="p">))</span>
</span><span class="line">          <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="nv">b</span> <span class="nv">p</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">q</span><span class="p">))</span>
</span><span class="line">          <span class="nv">p</span>
</span><span class="line">          <span class="nv">q</span>
</span><span class="line">          <span class="p">(</span><span class="nb">- </span><span class="nv">count</span> <span class="mi">1</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.21</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="c1">; the following expressions produce</span>
</span><span class="line"><span class="c1">; 199</span>
</span><span class="line"><span class="c1">; 1999</span>
</span><span class="line"><span class="c1">; 7</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">smallest-divisor</span> <span class="mi">199</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">smallest-divisor</span> <span class="mi">1999</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">smallest-divisor</span> <span class="mi">19999</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.25</strong>
Answer:</p>
<p>Since <em>Scheme</em> has built-in support for arbitrary precision arithmetic, the
procedure will produce the same result as the original <em>expmod</em>, however,
it will be very inefficient since the huge number arithmetic will take much
longer time than the numbers can be represented by a single computer word.</p>
<p>The original <em>expmod</em> used the successive squaring, the numbers to be processed
will never be larger than m^2.</p>
<p><strong>1.26</strong>
Answer:</p>
<p>With the calling of <em>square</em>, the original problem can be reduced to a sub
problem with half of the size at each of the step when even? test is true.
So T(n) = T(n/2) = O(logn)</p>
<p>However, if the explicit multiplication used instead, the recursive call
of expmod will be evaluated twice, it not only just compute the sub
problems two time, it is actually a tree recursion like the first solution
for computing fibnacci sequence, so the number of expmod calls grow
exponentially, which conclues that T(n) = O(2^n * logn) = O(n)</p>
<p><strong>1.27</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fermat-test</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">fermat-test-iter</span> <span class="nv">n</span> <span class="mi">2</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fermat-test-iter</span> <span class="nv">n</span> <span class="nv">a</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">n</span> <span class="nv">a</span><span class="p">)</span> <span class="nv">true</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">expmod</span> <span class="nv">a</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">)</span> <span class="nv">a</span><span class="p">))</span> <span class="nv">false</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">fermat-test-iter</span> <span class="nv">n</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">a</span> <span class="mi">1</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">expmod</span> <span class="nv">base</span> <span class="nv">exp</span> <span class="nv">m</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">exp</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">exp</span><span class="p">)</span>
</span><span class="line">         <span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nf">square</span> <span class="p">(</span><span class="nf">expmod</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">exp</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">m</span><span class="p">))</span> <span class="nv">m</span><span class="p">))</span>
</span><span class="line">        <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nb">* </span><span class="nv">base</span> <span class="p">(</span><span class="nf">expmod</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">- </span><span class="nv">exp</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">m</span><span class="p">))</span> <span class="nv">m</span><span class="p">))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="c1">; Carmichael numbers</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">561</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">1105</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">1729</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">2465</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">2821</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">fermat-test</span> <span class="mi">6601</span><span class="p">)</span>
</span><span class="line"><span class="c1">; these all give #t</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">561</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">1105</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">1729</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">2465</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">2821</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">prime?</span> <span class="mi">6601</span><span class="p">)</span>
</span><span class="line"><span class="c1">; these all give #f</span>
</span></code></pre></td></tr></table></div></figure><p><strong>1.28</strong></p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
</pre></td><td class="code"><pre><code class="scheme"><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">try-it</span> <span class="nv">a</span><span class="p">)</span>
</span><span class="line">    <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">expmod-with-signal</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">  <span class="p">(</span><span class="nf">try-it</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="p">(</span><span class="nf">random</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">2</span><span class="p">)))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">expmod-with-signal</span> <span class="nv">base</span> <span class="nv">exp</span> <span class="nv">m</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">exp</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">((</span><span class="nb">even? </span><span class="nv">exp</span><span class="p">)</span>
</span><span class="line">         <span class="p">(</span><span class="nf">square-with-signal</span> <span class="p">(</span><span class="nf">expmod-with-signal</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">exp</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">m</span><span class="p">)</span> <span class="nv">m</span><span class="p">))</span>
</span><span class="line">        <span class="p">(</span><span class="nf">else</span>
</span><span class="line">         <span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nb">* </span><span class="nv">base</span> <span class="p">(</span><span class="nf">expmod-with-signal</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">- </span><span class="nv">exp</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">m</span><span class="p">))</span> <span class="nv">m</span><span class="p">))))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square-with-signal</span> <span class="nv">a</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="nv">a</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">           <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="nv">a</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))</span>
</span><span class="line">           <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">a</span><span class="p">)</span> <span class="nv">n</span><span class="p">)</span> <span class="mi">1</span><span class="p">))</span>
</span><span class="line">      <span class="mi">0</span>
</span><span class="line">      <span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">a</span><span class="p">)</span> <span class="nv">n</span><span class="p">)))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">561</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">1105</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">1729</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">2465</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">2821</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">6601</span><span class="p">)</span>
</span><span class="line"><span class="c1">; these will all give #f with quite a chance, but with enough runs, it will</span>
</span><span class="line"><span class="c1">; have some false positive</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">newline</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">7</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">23</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">103</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">1009</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">1019</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">miller-rabin-test</span> <span class="mi">1000033</span><span class="p">)</span>
</span><span class="line"><span class="c1">; these will always all give #t</span>
</span></code></pre></td></tr></table></div></figure></div></div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Chao Chu</span></span>

      








  


<time datetime="2013-06-14T00:54:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/sicp/'>sicp</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/05/14/sicp-section-1-1/" title="Previous Post: SICP Section 1.1">&laquo; SICP Section 1.1</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/06/27/sicp-section-1-3/" title="Next Post: SICP Section 1.3">SICP Section 1.3 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/coursera/'>coursera (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (3)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (4)</a></li>
<li class='category'><a href='/blog/categories/scala/'>scala (1)</a></li>
<li class='category'><a href='/blog/categories/sicp/'>sicp (3)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/07/scala-cake-pattern/">Scala Cake Pattern</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/27/sicp-section-1-3/">SICP Section 1.3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/14/sicp-section-1-2/">SICP Section 1.2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/14/sicp-section-1-1/">SICP Section 1.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/06/coursera-online-functional-programming-course-review/">Coursera online functional programming course - a retrospective</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Recent Comments</h1>
        <div id="dsq-recentcomments" class="dsq-widget">
            <script type="text/javascript" src="http://disqus.com/forums/chaoc/recent_comments_widget.js?hide_avatars=1">
            </script>
        </div>
</section>

<section>
    <h2>Reading List</h2>
    <div>
        <script type="text/javascript" src="http://www.douban.com/service/badge/3607474/?show=dolist&amp;n=6&amp;columns=3&amp;hidelogo=yes&amp;cat=book" >
        </script>
    </div>
</section>

<section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 185%" href="/blog/tags/chapter-1/">Chapter 1</a>
<a style="font-size: 210%" href="/blog/tags/sicp/">SICP</a>
<a style="font-size: 150%" href="/blog/tags/scala/">Scala</a>
<a style="font-size: 90%" href="/blog/tags/blog/">blog</a>
<a style="font-size: 90%" href="/blog/tags/github/">github</a>
<a style="font-size: 90%" href="/blog/tags/heap/">heap</a>
<a style="font-size: 90%" href="/blog/tags/latex/">latex</a>
<a style="font-size: 185%" href="/blog/tags/octopress/">octopress</a>
<a style="font-size: 90%" href="/blog/tags/priority-queue/">priority queue</a>
<a style="font-size: 210%" href="/blog/tags/python/">python</a>

  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Chao Chu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'chaoc';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://chuchao333.github.io/blog/2013/06/14/sicp-section-1-2/';
        var disqus_url = 'http://chuchao333.github.io/blog/2013/06/14/sicp-section-1-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
